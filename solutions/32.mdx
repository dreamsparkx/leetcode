---
title: 32. Longest Valid Parentheses (Hard)
tags:
  - String
  - Dynamic Programming
  - Stack
---

import SolutionDocHead from "../src/containers/SolutionDocHead";

<SolutionDocHead
  solutionType={"hard"}
  labels={["String", "Dynamic Programming", "Stack"]}
  url={"https://leetcode.com/problems/longest-valid-parentheses/"}
/>

Given a string containing just the characters `'('` and `')'`, find the length of the longest valid (well-formed) parentheses substring.

<b>Example 1:</b>

```
Input: s = "(()"
Output: 2
Explanation: The longest valid parentheses substring is "()".
```

<b>Example 2:</b>

```
Input: s = ")()())"
Output: 4
Explanation: The longest valid parentheses substring is "()()".
```

<b>Example 3:</b>

```
Input: s = ""
Output: 0
```

<b>Constraints:</b>

- 0 <= s.length <= 3 \* 10<sup>4</sup>
- `s[i] is '(', or ')'`.

```ts title=solution.ts
function longestValidParentheses(s: string): number {
  let stack: number[] = [-1],
    ans: number = 0;
  for (let i = 0; i < s.length; i++) {
    if (s[i] === "(") {
      stack.push(i);
    } else if (stack.length === 1) {
      stack[0] = i;
    } else {
      stack.pop();
      ans = Math.max(ans, i - stack[stack.length - 1]);
    }
  }
  return ans;
}
```
